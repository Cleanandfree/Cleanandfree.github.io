<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>MySQL知识点 ~ Hexo</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >
<link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">


  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


  



</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Hexo</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              <p class="mt-3">Wednesday, October 30th 2019, 6:29 pm</p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h1 id="Mysql数据库知识点"><a href="#Mysql数据库知识点" class="headerlink" title="Mysql数据库知识点"></a>Mysql数据库知识点</h1><h2 id="1-管理数据库语句："><a href="#1-管理数据库语句：" class="headerlink" title="1.管理数据库语句："></a>1.管理数据库语句：</h2><p><strong>使用数据库：</strong></p>
<p>use 数据库名;</p>
<p><strong>添加数据库：</strong></p>
<p>create database 数据库名;</p>
<p><strong>修改数据库：</strong></p>
<p>alter database 数据库名;</p>
<p><strong>删除数据库：</strong></p>
<p>drop database 数据库名;</p>
<p><strong>查看所有数据库：</strong></p>
<p>show databases;</p>
<h2 id="2-管理表语句："><a href="#2-管理表语句：" class="headerlink" title="2.管理表语句："></a><strong>2.管理表语句：</strong></h2><p><strong>添加数据表：</strong></p>
<p>create table 表名(</p>
<p>　　列名 数据类型 数据约束,</p>
<p>　　列名 数据类型 数据约束</p>
<p>);</p>
<p>create table student(</p>
<p>　　name varchar(20) not null,</p>
<p>　　age int(4)</p>
<p>)</p>
<p><strong>修改数据表：</strong></p>
<p>alter table 表名;</p>
<p>1)在表中增加新字段</p>
<p>alter table student add colunm name varchar(20);</p>
<p>2)删除表中的字段</p>
<p>alter table student drop name;</p>
<p>3)修改表中字段的类型</p>
<p>alter table student modify name varchar(10);</p>
<p><strong>删除数据表：</strong></p>
<p>drop table 表名;</p>
<p>drop table student;</p>
<p><strong>查看所有表：</strong></p>
<p>show tables;</p>
<h2 id="3-管理数据语句："><a href="#3-管理数据语句：" class="headerlink" title="3.管理数据语句："></a>3.管理数据语句：</h2><p><strong>插入数据：</strong></p>
<p>insert into 表名 (列1,列2…) values (值1,值2…);</p>
<p>insert into student (name,age) values (‘张三’,20);</p>
<p><strong>更新数据：</strong></p>
<p>update 表名 set 列=修改值 where 条件;</p>
<p>update student set name=’李四’ where name=’张三’;</p>
<p><strong>删除数据：</strong></p>
<p>delete from 表名 where 条件;</p>
<p>delete from student where name=’李四’;</p>
<p><strong>查询数据：</strong></p>
<p>selete * from 表名 where 条件;</p>
<p>selete * from student where name=’张三’;</p>
<h2 id="4-各种查询语句："><a href="#4-各种查询语句：" class="headerlink" title="4.各种查询语句："></a><strong>4.各种查询语句：</strong></h2><p><strong>查询时指定别名：</strong></p>
<p>1) selete id AS ‘编号’,name AS ‘姓名’ from student;</p>
<p>2) selete id ‘编号’,name ‘姓名’ from student;(AS可以省略)</p>
<p><strong>查询时合并列：</strong></p>
<p>需求:查询每个学生的总分</p>
<p>selete name AS ‘姓名’,(servlet+mysql) AS ‘总成绩’ from student;</p>
<p>注意:合并列的字段必须是数值类型的字段</p>
<p><strong>查询时去除重复(distinct)：</strong></p>
<p>需求:查询有哪些地区的学生</p>
<p>selete DISTINCT address from student;</p>
<p>另一种语法</p>
<p>selete DISTINCT(address) from student;</p>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a><strong>条件查询</strong></h3><p><strong>逻辑条件: and  or</strong></p>
<p>需求:查询学生的id为1，且姓名为张三的学生</p>
<p>selete * from student where id=1 and name=’张三’;(交集)</p>
<p>需求:查询学生的id为2，或姓名为张三的学生</p>
<p>selete * from student where id=2 or name=’张三’;(并集)</p>
<p><strong>比较条件: &gt;  &lt;  &gt;=  &lt;=  =  &lt;&gt;  (between and–在…之间 包前包后)</strong></p>
<p>需求:查询servlet分数大于80分的学生</p>
<p>selete * from student where servlet&gt;80;</p>
<p>需求:查询mysql分数小于或等于85分的学生</p>
<p>selete * from student where mysql&lt;=85;</p>
<p>需求:查询servlet分数大于或等于80分，且小于或等于85分的学生</p>
<p>selete * from student where servlet&gt;=80 AND servlet&lt;=85;</p>
<p>代替上面语句的语法</p>
<p>selete * from student where servlet BETWEEN 80 AND 85;</p>
<p>需求:查询年龄不等于30的学生</p>
<p>selete * from student where age&lt;&gt;30;</p>
<p><strong>判空条件: is null,  is not null,  =**</strong>’’<strong><strong>,  &lt;&gt;</strong></strong>’’**</p>
<p>Null:表示没有数据</p>
<p>空字符:表示有数据</p>
<p>需求:查询没有性别数据的学生(数据‘男’或‘女’)</p>
<p>selete* from student where gender IS NULL OR gender=’’;</p>
<p>需求:查询有性别数据的学生</p>
<p>selete * from student where gender IS NOT NULL AND gender&lt;&gt;’’;</p>
<p><strong>模糊条件: like</strong></p>
<p>模糊替代符号:</p>
<p>%:替代任意个字符</p>
<p>_:替代一个字符</p>
<p>需求:查询姓“李”的学生</p>
<p>SELECT * FROM student WHERE NAME LIKE ‘李%’;</p>
<p>需求:查询姓名中包含‘四’字的学生</p>
<p>SELECT * FROM student WHERE NAME LIKE ‘%四%’;</p>
<p>需求:查询姓‘李’，全名只有两个字的学生</p>
<p>SELECT * FROM student WHERE NAME LIKE ‘李_’;</p>
<p><strong>聚合函数查询(用于统计结果)</strong></p>
<p>Max()取最大值  min()取最小值  avg()取平均值  count()统计标的记录数量 sum()求和</p>
<p>需求:查询servlet的最高分</p>
<p>SELECT MAX(servlet) FROM student;</p>
<p>需求:查询mysql的最低分</p>
<p>SELECT MIN(mysql) FROM student;</p>
<p>需求:查询servlet的平均分</p>
<p>SELECT AVG(servlet) FROM student;</p>
<p>需求:查询当前有几个学生</p>
<p>SELECT COUNT(*) FROM student;</p>
<p>需求:查询servlet成绩的总和</p>
<p>SELETE SUM(servlet) from student;</p>
<p><strong>分页查询(limit)</strong></p>
<p>Limit起始行数，查询的行数</p>
<p>起始行数从0开始</p>
<p>需求:查询第1,2条数据</p>
<p>SELECT * FROM student LIMIT 0,2;</p>
<p>分页查询需知道:当前页码，每页显示条数</p>
<p>结论分页查询当前页数据:select * from student limit (当前页码-1)*每页显示条数，每页显示条数;</p>
<p>需求:学生共20条数据，每页显示5条，共4页</p>
<p>查询第3页(第11到15条)的学生数据:select * from student limit 10,5;</p>
<p><strong>查询后排序(order by)</strong></p>
<p>DESC:降序。数值从大到小，字母z-a</p>
<p>ASC:升序。数值从小到大，字母a-z</p>
<p>默认情况下，按照插入的顺序排序</p>
<p>需求:按照id的升序排序</p>
<p>select * from student order by id asc;</p>
<p>需求:按照servlet成绩降序排序</p>
<p>select * from student order by servlet desc;</p>
<p>多个排序条件的情况:先按照前面的条件排序，当出现重复记录，再按照后面的条件排序</p>
<p>需求:按照age升序，再按照servlet成绩升序排序</p>
<p>select * from student order by age asc,servlet asc;</p>
<p><strong>分组查询(group by)</strong></p>
<p>需求:查询每个地区有多少人</p>
<p>SELECT address,COUNT(*) FROM student GROUP BY address;</p>
<p>需求:统计男女的人数</p>
<p>注意:where条件必须放在group by 分组之前</p>
<p>SELECT gender,COUNT(*) FROM student WHERE gender IS NOT NULL AND gender&lt;&gt;’’ GROUP BY gender;</p>
<p><strong>分组后筛选(having)</strong></p>
<p>需求:查询哪些地区的人数是大于2个的地区</p>
<p>查询哪些地区多少人 2)筛选人数大于2的地区</p>
<p>注意:having使用在group by分组之后，对分组后的条件进行筛选</p>
<p>SELECT address,COUNT(<em>) FROM student GROUP BY address HAVING COUNT(</em>)&gt;2;</p>
<h2 id="5-数据约束（给表添加数据约束，从而约束用户操作表数据的行为）"><a href="#5-数据约束（给表添加数据约束，从而约束用户操作表数据的行为）" class="headerlink" title="5.数据约束（给表添加数据约束，从而约束用户操作表数据的行为）"></a>5.数据约束（给表添加数据约束，从而约束用户操作表数据的行为）</h2><p><strong>1）默认值约束(default)</strong></p>
<p>create table test(</p>
<p>　　name varchar(20),</p>
<p>　　gender varchar(20) default ‘男’</p>
<p>)</p>
<p>需求:当不插入gender的时候，分配一个‘男’的默认值</p>
<p>注意:1)当没有插入gender字段的时候，分配一个默认值</p>
<p><strong>2）非空约束（not null）</strong></p>
<p>create table test(</p>
<p>　　name varchar(20) not null,</p>
<p>　　gender varchar(20)</p>
<p>)</p>
<p>需求；name字段一定要有值(不能不插入数据，不能是null)，这是给name添加非空约束</p>
<p>1)非空约束，不能不插入值</p>
<p>Insert into test(gender) values(‘男’);</p>
<p>2)非空约束，不能插入null</p>
<p>Insert into test(name,gender) values(null,’男’);</p>
<p><strong>3)唯一约束(unique)</strong></p>
<p>create table test(</p>
<p>　　Id int unique,</p>
<p>　　name varchar(20)</p>
<p>)</p>
<p>需求:id的值不能出现重复。这时就要给id添加一个唯一约束</p>
<p>1)不能插入重复的值</p>
<p>2)唯一约束，可以插入多个null。所以唯一约束不能约束null</p>
<p>Insert into test(id,name) values(1,’张三’);</p>
<p><strong>4)主键约束(primary key)(唯一+非空)</strong></p>
<p>注意；</p>
<p>1)通常情况下，我们会给每张表都设置一个主键字段，用来标记记录的唯一性</p>
<p>2)但是不建议把业务含义字段作为主键，因为随着业务的变化，业务字段可能出现重复</p>
<p>3)建议给每张表都独立添加一个叫id的字段，把这个id字段设置成主键，用来作为记录的唯一性</p>
<p>create table test(</p>
<p>　　Id int primary key,</p>
<p>　　name varchar(20)</p>
<p>)</p>
<p>1)唯一性</p>
<p>2)非空性</p>
<p><strong>5)自增长约束(auto_increment)</strong></p>
<p>create table test(</p>
<p>　　Id int primary key auto_increment,</p>
<p>　　name varchar(20)</p>
<p>)</p>
<p>自增长约束:初始值为0，每次递增1</p>
<p>使用truncate table 删除数据的时候，可以把自增长的初始值置为0</p>
<p><strong>6)外键约束</strong></p>
<p>员工表(副表:被别的表约束的表，外键设置在副表)</p>
<p>Create table employee(</p>
<p>　　Id int primary key auto_increment,</p>
<p>　　name varchar(20),</p>
<p>　　deptId int,</p>
<p>　　添加外键约束(foreign key)</p>
<p>　　Constraint employee_dept_fk foreign key(deptId) references dept(id)</p>
<p>​     　　　　　　 外键名                外键字段        </p>
<p>)</p>
<p>部门表(主表:约束别人的表)</p>
<p>Create table dept(</p>
<p>　　Id int primary key auto_increment,</p>
<p>　　Name varchar(20)</p>
<p>)</p>
<p><strong>外键约束在什么情况下会起作用？</strong></p>
<p>插入数据:当往副表插入了主表中不存在的数据时，外键起作用</p>
<p>修改数据:当往副表中修改主表中不存在的数据时，外键起作用</p>
<p>删除数据:副表中有关联主表数据的情况下，当删除主表数据时，外键起作用</p>
<p><strong>当有了外键之后，应该如何管理数据呢？</strong></p>
<p>插入数据:先插入主表的数据，再插入副表数据</p>
<p>修改数据:先修改主表数据，再修改副表数据</p>
<p>删除数据:先删除副表数据，再删除主表数据</p>
<h2 id="6-数据库设计的三大范式"><a href="#6-数据库设计的三大范式" class="headerlink" title="6.数据库设计的三大范式"></a><strong>6.数据库设计的三大范式</strong></h2><p><strong>第一范式；要求表的每个字段必须独立的不可分割的单元</strong></p>
<p>学生表: student name —违反第一范式</p>
<p>​        张三|狗娃</p>
<p>   王涵|张小涵</p>
<p>查询:现用名中包含‘张’的学生</p>
<p>Select * from student where name like ‘%张%’;</p>
<p>学生表: student name old_name —符合第一范式</p>
<p>​          张三  狗娃</p>
<p>​    王涵       张小涵</p>
<p><strong>第二范式:在第一范式的基础上，要求表的除主键以外的字段都和主键有依赖关系</strong></p>
<p>一张表只表达一个意思</p>
<p>员工表:employee</p>
<p>员工编号  员工姓名  部门名称   订单名称  —违反第二范式</p>
<p>员工表:employee</p>
<p>员工编号  员工姓名  部门名称   —符合第二范式</p>
<p>​      订单表:</p>
<p>​      订单编号 订单名称</p>
<p><strong>第三范式:在第二范式的基础上，要求表的除主键以外的字段都只能和主键有直接决定的依赖关系</strong></p>
<p>员工表:employee</p>
<p>员工编号  员工姓名  部门编号 部门名称 —违反第三范式(出现数据冗余)</p>
<p>​        1     张三    1     软件开发部</p>
<p>​        2     李四    1     软件开发部</p>
<p>员工表:employee</p>
<p>员工编号  员工姓名  部门编号  —符合第三范式</p>
<p> 1     张三    1</p>
<p> 2     李四    1</p>
<p>部门表:dept</p>
<p>部门编号  部门名称</p>
<p>1      软件开发部</p>
<h2 id="7-多表查询"><a href="#7-多表查询" class="headerlink" title="7.多表查询"></a><strong>7.多表查询</strong></h2><p><strong>1.交叉连接查询(笛卡尔乘积:4*3=12，产生笛卡尔积的原因是没有足够的连接条件)(一般不用)</strong></p>
<p>需求:查询员工及其部门名称</p>
<p>SELECT employee.name,dept.name</p>
<p>FROM employee,dept;</p>
<p><strong>2.内连接查询(使用最多)</strong></p>
<p>多表查询的步骤:1)确定查询哪些表</p>
<p>​        2)确定查询哪些字段</p>
<p>​        3)确定连接条件(规则:条件=表数量-1)</p>
<p>SELECT employee.name,dept.name</p>
<p>FROM employee,dept</p>
<p>WHERE employee.deptId=dept.id;</p>
<p>另一种语法</p>
<p>SELECT e.name,d.name</p>
<p>FROM employee e</p>
<p>INNER JOIN dept d</p>
<p>ON e.deptId=d.id;</p>
<p><strong>3.左外连接查询(左表数据全部显示，如果右边不满足，则显示null)</strong></p>
<p>需求:查询部门及其部门的员工</p>
<p>SELECT d.name,e.name</p>
<p>FROM dept d</p>
<p>LEFT OUTER JOIN employee e</p>
<p>ON d.id=e.deptId;</p>
<p><strong>4.右外连接查询(右表数据全部显示，如果左边不满足，则显示null)</strong></p>
<p>SELECT d.name,e.name</p>
<p>FROM employee e</p>
<p>RIGHT OUTER JOIN dept d</p>
<p>ON e.deptId=d.id;</p>

            <hr>
          </div>
          <br>
          <div>
            
            <p>
              <i class="iconfont icon-tag"></i>
              
              <span id="/2019/10/30/MySQL知识点/" class="visitors leancloud_visitors" data-flag-title="MySQL知识点">
                <em id="visitors-text" class="post-meta-item-text"></em>
                <i id="visitors-count"></i>
              </span>
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;TOC</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>
    
  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>


  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>


  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "MySQL知识点&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $('#post').find('img').each(
      function () {
        var _this = $(this);
        var _src = _this.attr("src");
        _this.wrap('<a data-fancybox="images" href="' + _src + '" ></a>');
      }
    );
  </script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>




</body>
</html>
